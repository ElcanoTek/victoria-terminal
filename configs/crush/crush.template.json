{
  "$schema": "https://charm.land/crush.json",
  "permissions": {
    "allowed_tools": ["*"]
  },
  "lsp": {
    "python": {
      "command": "python",
      "args": ["-m", "pylsp"]
    }
  },
  "providers": {
    "openrouter": {
      "type": "openai",
      "base_url": "https://openrouter.ai/api/v1",
      "api_key": "${OPENROUTER_API_KEY}",
      "name": "OpenRouter"
    }
  },
  "options": {
    "context_paths": ["VICTORIA.md"],
    "tui": {
      "compact_mode": true
    }
  },
  "mcp": {
    "browseros": {
      "type": "http",
      "url": "${BROWSEROS_URL}"
    },
    "motherduck": {
      "type": "stdio",
      "command": "mcp-server-motherduck",
      "args": ["--db-path", "${VICTORIA_HOME}/.adtech.duckdb"]
    },
    "browserbase": {
      "type": "stdio",
      "command": "mcp-server-browserbase",
      "args": [],
      "env": {
        "BROWSERBASE_API_KEY": "${BROWSERBASE_API_KEY}",
        "BROWSERBASE_PROJECT_ID": "${BROWSERBASE_PROJECT_ID}",
        "GEMINI_API_KEY": "${GEMINI_API_KEY}"
      }
    },
    "gamma": {
      "type": "stdio",
      "command": "python3",
      "args": ["${GAMMA_MCP_SCRIPT}"],
      "cwd": "${GAMMA_MCP_DIR}",
      "env": {
        "GAMMA_API_KEY": "${GAMMA_API_KEY}",
        "PYTHONPATH": "${GAMMA_MCP_DIR}"
      }
    },
    "sendgrid": {
      "type": "stdio",
      "command": "python3",
      "args": ["${SENDGRID_MCP_SCRIPT}"],
      "cwd": "${SENDGRID_MCP_DIR}",
      "env": {
        "SENDGRID_API_KEY": "${SENDGRID_API_KEY}",
        "PYTHONPATH": "${SENDGRID_MCP_DIR}"
      }
    },
    "snowflake": {
      "type": "stdio",
      "command": "snowflake-labs-mcp",
      "args": [
        "--service-config-file",
        "/workspace/configs/mcp/snowflake.tools.yaml"
      ],
      "env": {
        "SNOWFLAKE_ACCOUNT": "${SNOWFLAKE_ACCOUNT}",
        "SNOWFLAKE_USER": "${SNOWFLAKE_USER}",
        "SNOWFLAKE_PASSWORD": "${SNOWFLAKE_PASSWORD}"
      }
    },
    "email": {
      "type": "stdio",
      "command": "python3",
      "args": ["${EMAIL_MCP_SCRIPT}"],
      "cwd": "${EMAIL_MCP_DIR}",
      "env": {
        "AWS_ACCESS_KEY_ID": "${AWS_ACCESS_KEY_ID}",
        "AWS_SECRET_ACCESS_KEY": "${AWS_SECRET_ACCESS_KEY}",
        "AWS_REGION": "${AWS_REGION}",
        "EMAIL_S3_BUCKET": "${EMAIL_S3_BUCKET}",
        "EMAIL_S3_PREFIX": "${EMAIL_S3_PREFIX}",
        "EMAIL_ATTACHMENT_DIR": "${EMAIL_ATTACHMENT_DIR}",
        "EMAIL_LAST_CHECK_FILE": "${EMAIL_LAST_CHECK_FILE}",
        "PYTHONPATH": "${EMAIL_MCP_DIR}"
      }
    },
    "status-reporter": {
      "type": "stdio",
      "command": "python3",
      "args": ["${STATUS_REPORTER_MCP_SCRIPT}"],
      "cwd": "${STATUS_REPORTER_MCP_DIR}",
      "env": {
        "ORCHESTRATOR_URL": "${ORCHESTRATOR_URL}",
        "NODE_API_KEY": "${NODE_API_KEY}",
        "PYTHONPATH": "${STATUS_REPORTER_MCP_DIR}",
        "TASK_ID": "${TASK_ID}",
        "VICTORIA_HOME": "${VICTORIA_HOME}"
      }
    }
  }
}
