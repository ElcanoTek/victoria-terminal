{
  "$schema": "https://charm.land/crush.json",
  "permissions": {
    "allowed_tools": ["*"]
  },
  "lsp": {
    "python": {
      "command": "python",
      "args": ["-m", "pylsp"]
    }
  },
  "providers": {
    "openrouter": {
      "type": "openai",
      "base_url": "https://openrouter.ai/api/v1",
      "api_key": "${OPENROUTER_API_KEY}",
      "name": "OpenRouter"
    },
    "lmstudio": {
      "type": "openai",
      "base_url": "http://host.containers.internal:1234/v1",
      "api_key": "not-needed",
      "name": "LM Studio (local)",
      "models": [
        {
          "id": "openai/gpt-oss-120b",
          "name": "gpt-oss-120b (LM Studio)",
          "context_window": 131072,
          "default_max_tokens": 4096,
          "supports_tools": true
        },
        {
          "id": "qwen/qwen3-coder-30b",
          "name": "Qwen 3 Coder 30B (LM Studio)",
          "context_window": 131072,
          "default_max_tokens": 4096,
          "supports_tools": true
        }
      ]
    }
  },
  "options": {
    "context_paths": ["VICTORIA.md", "PRIVATE.md"],
    "tui": {
      "compact_mode": true
    }
  },
  "mcp": {
    "motherduck": {
      "type": "stdio",
      "command": "mcp-server-motherduck",
      "args": ["--db-path", "${VICTORIA_HOME}/adtech.duckdb"]
    },
    "browserbase": {
      "type": "stdio",
      "command": "npx",
      "args": ["@browserbasehq/mcp-server-browserbase"],
      "env": {
        "BROWSERBASE_API_KEY": "${BROWSERBASE_API_KEY}",
        "BROWSERBASE_PROJECT_ID": "${BROWSERBASE_PROJECT_ID}",
        "GEMINI_API_KEY": "${GEMINI_API_KEY}"
      }
    },
    "gamma": {
      "type": "stdio",
      "command": "python3",
      "args": ["${GAMMA_MCP_SCRIPT}"],
      "cwd": "${GAMMA_MCP_DIR}",
      "env": {
        "GAMMA_API_KEY": "${GAMMA_API_KEY}",
        "PYTHONPATH": "${GAMMA_MCP_DIR}"
      }
    },
    "sendgrid": {
      "type": "stdio",
      "command": "python3",
      "args": ["${SENDGRID_MCP_SCRIPT}"],
      "cwd": "${SENDGRID_MCP_DIR}",
      "env": {
        "SENDGRID_API_KEY": "${SENDGRID_API_KEY}",
        "PYTHONPATH": "${SENDGRID_MCP_DIR}"
      }
    },
    "snowflake": {
      "type": "stdio",
      "command": "snowflake-labs-mcp",
      "args": [
        "--service-config-file",
        "/workspace/configs/mcp/snowflake.tools.yaml"
      ],
      "env": {
        "SNOWFLAKE_ACCOUNT": "${SNOWFLAKE_ACCOUNT}",
        "SNOWFLAKE_USER": "${SNOWFLAKE_USER}",
        "SNOWFLAKE_PASSWORD": "${SNOWFLAKE_PASSWORD}"
      }
    },
    "email": {
      "type": "stdio",
      "command": "python3",
      "args": ["${EMAIL_MCP_SCRIPT}"],
      "cwd": "${EMAIL_MCP_DIR}",
      "env": {
        "AWS_ACCESS_KEY_ID": "${AWS_ACCESS_KEY_ID}",
        "AWS_SECRET_ACCESS_KEY": "${AWS_SECRET_ACCESS_KEY}",
        "AWS_REGION": "${AWS_REGION}",
        "EMAIL_S3_BUCKET": "${EMAIL_S3_BUCKET}",
        "EMAIL_S3_PREFIX": "${EMAIL_S3_PREFIX}",
        "EMAIL_ATTACHMENT_DIR": "${EMAIL_ATTACHMENT_DIR}",
        "EMAIL_LAST_CHECK_FILE": "${EMAIL_LAST_CHECK_FILE}",
        "PYTHONPATH": "${EMAIL_MCP_DIR}"
      }
    }
  }
}
